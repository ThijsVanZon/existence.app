<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a1322">
  <title>Toadstools</title>
  <style>
    :root {
      --tilt-x: 0;
      --tilt-y: 0;
      --energy: 0;
      --hue-shift: 0deg;
      --glow: 0.8;
      --bg-a: #1b1127;
      --bg-b: #24193a;
      --bg-c: #10243a;
      --mycelium: rgba(218, 255, 226, 0.24);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html,
    body {
      margin: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #09070f;
      touch-action: manipulation;
    }

    body[data-quality="low"] .scene {
      filter: saturate(1.08);
      transition: transform 220ms ease-out;
    }

    body[data-quality="low"] .layer-b,
    body[data-quality="low"] .mycelium-b {
      display: none;
    }

    body[data-quality="low"] .bg-layer {
      mix-blend-mode: normal;
      opacity: 0.65;
    }

    body[data-quality="low"] .fungus {
      filter: brightness(calc(0.9 + var(--glow) * 0.1));
    }

    body[data-quality="low"] .fungus .aura {
      display: none;
    }

    body[data-quality="low"] .spore {
      filter: none;
    }

    body[data-quality="low"] .bg-layer,
    body[data-quality="low"] .mycelium,
    body[data-quality="low"] .fungus .cap,
    body[data-quality="low"] .fungus .stem {
      animation: none !important;
    }

    body[data-quality="low"] .gyro-orb {
      filter: none;
      animation-duration: 9.5s;
    }

    body[data-quality="minimal"] .scene {
      filter: none;
      transform: none;
      transition: none;
    }

    body[data-quality="minimal"] .bg-layer,
    body[data-quality="minimal"] .mycelium-b,
    body[data-quality="minimal"] .spore,
    body[data-quality="minimal"] .gyro-orb {
      display: none;
    }

    body[data-quality="minimal"] .fungus .aura {
      display: none;
    }

    .scene {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 12% 8%, rgba(255, 130, 180, 0.16), transparent 36%),
        radial-gradient(circle at 82% 14%, rgba(110, 150, 255, 0.16), transparent 36%),
        radial-gradient(circle at 50% 98%, rgba(60, 240, 180, 0.12), transparent 56%),
        linear-gradient(165deg, var(--bg-a), var(--bg-b) 58%, var(--bg-c));
      filter: hue-rotate(var(--hue-shift)) saturate(calc(1 + var(--energy) * 0.35));
      transform: perspective(980px)
        rotateX(calc(var(--tilt-y) * 8deg))
        rotateY(calc(var(--tilt-x) * -10deg))
        scale(calc(1 + var(--energy) * 0.01));
      transform-origin: center center;
      transition: transform 160ms ease-out, filter 220ms ease-out;
      isolation: isolate;
    }

    .bg-layer {
      position: absolute;
      inset: -22%;
      pointer-events: none;
      mix-blend-mode: screen;
      z-index: 0;
    }

    .layer-a {
      background:
        radial-gradient(circle at 20% 40%, rgba(255, 80, 180, 0.28), transparent 30%),
        radial-gradient(circle at 78% 30%, rgba(100, 170, 255, 0.22), transparent 32%);
      animation: wash 12s ease-in-out infinite alternate;
    }

    .layer-b {
      background:
        radial-gradient(circle at 55% 65%, rgba(96, 255, 218, 0.22), transparent 34%),
        radial-gradient(circle at 35% 84%, rgba(245, 214, 122, 0.22), transparent 28%);
      animation: wash 16s ease-in-out infinite alternate-reverse;
    }

    .mycelium {
      position: absolute;
      inset: auto -20% -4% -20%;
      height: 42%;
      opacity: calc(0.55 + var(--energy) * 0.2);
      pointer-events: none;
      z-index: 1;
      background:
        repeating-radial-gradient(circle at 8% 100%, var(--mycelium) 0 1px, transparent 1px 20px),
        repeating-radial-gradient(circle at 40% 100%, rgba(196, 255, 232, 0.16) 0 1px, transparent 1px 24px),
        repeating-radial-gradient(circle at 72% 100%, rgba(255, 232, 246, 0.16) 0 1px, transparent 1px 22px),
        repeating-radial-gradient(circle at 98% 100%, rgba(185, 225, 255, 0.14) 0 1px, transparent 1px 20px);
      transform: translate3d(calc(var(--tilt-x) * 18px), calc(var(--tilt-y) * -10px), 0);
      animation: pulse 4.4s ease-in-out infinite;
    }

    .mycelium-b {
      opacity: calc(0.38 + var(--energy) * 0.25);
      transform: translate3d(calc(var(--tilt-x) * -12px), calc(var(--tilt-y) * -6px), 0);
      filter: blur(0.4px);
      animation-duration: 6.2s;
    }

    .fungi-field,
    .spore-field {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .fungi-field {
      pointer-events: auto;
      z-index: 2;
    }

    .fungus {
      position: absolute;
      left: var(--x);
      bottom: var(--y);
      width: calc(84px * var(--scale));
      height: calc(150px * var(--scale));
      transform-origin: center bottom;
      filter: saturate(calc(1.05 + var(--energy) * 0.55))
        brightness(calc(0.9 + var(--glow) * 0.16))
        drop-shadow(0 9px 14px rgba(0, 0, 0, 0.28));
      pointer-events: none;
    }

    .fungus .aura {
      position: absolute;
      left: 50%;
      bottom: 2%;
      width: 118%;
      height: 36%;
      transform: translateX(-50%);
      border-radius: 50%;
      background: radial-gradient(circle, hsla(var(--tone), 90%, 72%, 0.32), transparent 70%);
      opacity: calc(0.3 + var(--energy) * 0.5);
      filter: blur(8px);
    }

    .fungus .stem {
      position: absolute;
      left: 50%;
      bottom: 0;
      width: 33%;
      height: 58%;
      transform: translateX(-50%);
      border-radius: 42% 42% 16% 16%;
      background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.66), rgba(0, 0, 0, 0.14)),
        hsl(calc(var(--tone) - 24), 24%, 76%);
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
    }

    .fungus .cap {
      position: absolute;
      left: 50%;
      bottom: 47%;
      width: 100%;
      height: 48%;
      transform: translateX(-50%);
      border-radius: 52% 52% 45% 45% / 72% 72% 34% 34%;
      background:
        radial-gradient(circle at 26% 24%, rgba(255, 255, 255, 0.36), transparent 26%),
        radial-gradient(circle at 78% 16%, rgba(255, 255, 255, 0.2), transparent 22%),
        linear-gradient(
          160deg,
          hsl(calc(var(--tone) + 16), 86%, 58%),
          hsl(calc(var(--tone) - 8), 78%, 40%)
        );
      box-shadow: inset 0 -8px 14px rgba(0, 0, 0, 0.2);
    }

    .fungus .gills {
      position: absolute;
      left: 50%;
      bottom: 44%;
      width: 82%;
      height: 16%;
      transform: translateX(-50%);
      border-radius: 0 0 50% 50%;
      background:
        repeating-linear-gradient(
          96deg,
          rgba(255, 255, 255, 0.38) 0 2px,
          rgba(255, 255, 255, 0.06) 2px 6px
        );
      opacity: 0.7;
    }

    .fungus .spots {
      position: absolute;
      left: 50%;
      bottom: 54%;
      width: 72%;
      height: 22%;
      transform: translateX(-50%);
      opacity: 0.9;
      background:
        radial-gradient(circle at 13% 54%, rgba(255, 255, 255, 0.96) 0 10%, transparent 11%),
        radial-gradient(circle at 34% 26%, rgba(255, 255, 255, 0.82) 0 12%, transparent 13%),
        radial-gradient(circle at 60% 66%, rgba(255, 255, 255, 0.9) 0 10%, transparent 11%),
        radial-gradient(circle at 83% 28%, rgba(255, 255, 255, 0.74) 0 10%, transparent 11%);
    }

    .fungus.jelly .cap {
      border-radius: 48% 52% 42% 58% / 66% 64% 36% 34%;
      background:
        radial-gradient(circle at 46% 14%, rgba(255, 255, 255, 0.45), transparent 30%),
        linear-gradient(170deg, hsla(calc(var(--tone) + 24), 92%, 66%, 0.82), hsla(calc(var(--tone) - 6), 82%, 48%, 0.88));
      backdrop-filter: blur(1px);
    }

    .fungus.jelly .spots {
      opacity: 0.45;
    }

    .fungus.coral .stem {
      width: 40%;
      height: 50%;
      border-radius: 48% 48% 24% 24%;
    }

    .fungus.coral .cap {
      border-radius: 38% 62% 44% 56% / 58% 48% 52% 42%;
    }

    .fungus.chanterelle .cap {
      border-radius: 44% 56% 58% 42% / 66% 62% 38% 34%;
      background:
        radial-gradient(circle at 30% 20%, rgba(255, 245, 202, 0.55), transparent 30%),
        linear-gradient(166deg, hsl(calc(var(--tone) + 10), 96%, 64%), hsl(calc(var(--tone) - 20), 82%, 46%));
    }

    .fungus.ink .cap {
      border-radius: 56% 44% 52% 48% / 66% 74% 26% 34%;
      background:
        radial-gradient(circle at 45% 16%, rgba(255, 255, 255, 0.25), transparent 28%),
        linear-gradient(168deg, hsl(calc(var(--tone) + 6), 55%, 34%), hsl(calc(var(--tone) - 22), 50%, 14%));
    }

    .fungus.glow .aura {
      opacity: calc(0.48 + var(--energy) * 0.5);
      filter: blur(12px);
    }

    .fungus.cluster .cap {
      width: 80%;
      height: 42%;
      left: 34%;
    }

    .fungus.cluster::after {
      content: "";
      position: absolute;
      left: 64%;
      bottom: 43%;
      width: 38%;
      height: 25%;
      border-radius: 50% 50% 45% 45% / 70% 70% 30% 30%;
      background:
        radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.34), transparent 30%),
        linear-gradient(162deg, hsl(calc(var(--tone) + 18), 84%, 56%), hsl(calc(var(--tone) - 10), 76%, 40%));
      box-shadow: inset 0 -4px 7px rgba(0, 0, 0, 0.2);
    }

    .spore {
      position: absolute;
      left: var(--x);
      top: var(--y);
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      opacity: 0;
      background: radial-gradient(circle at 34% 30%, rgba(255, 255, 255, 0.96), hsla(var(--tone), 90%, 76%, 0.62) 66%, transparent 100%);
      filter: blur(0.2px) drop-shadow(0 0 6px hsla(var(--tone), 90%, 76%, 0.5));
      animation: spore-drift var(--life) linear forwards;
      z-index: 5;
    }

    .gyro-gate {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      z-index: 8;
      background:
        radial-gradient(circle at 50% 42%, rgba(255, 255, 255, 0.14), rgba(0, 0, 0, 0.66) 48%, rgba(0, 0, 0, 0.88));
      color: rgba(242, 248, 255, 0.95);
      font: 600 0.92rem/1.2 -apple-system, BlinkMacSystemFont, "Segoe UI", Manrope, sans-serif;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      cursor: pointer;
      transition: opacity 320ms ease, visibility 320ms ease;
      user-select: none;
    }

    .gyro-gate.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .gyro-orb {
      position: absolute;
      width: 170px;
      height: 170px;
      border-radius: 50%;
      border: 1px solid rgba(221, 252, 255, 0.24);
      background:
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.32), transparent 62%),
        conic-gradient(from 0deg, rgba(114, 238, 204, 0.54), rgba(182, 122, 255, 0.54), rgba(255, 142, 182, 0.54), rgba(114, 238, 204, 0.54));
      mix-blend-mode: screen;
      filter: blur(0.4px);
      animation: spin 5.8s linear infinite;
    }

    .gyro-gate span {
      position: relative;
      z-index: 1;
      padding: 9px 13px;
      border-radius: 999px;
      background: rgba(12, 12, 20, 0.46);
      border: 1px solid rgba(255, 255, 255, 0.16);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.46; }
      50% { opacity: 0.76; }
    }

    @keyframes wash {
      0% { transform: translate3d(-3%, -2%, 0) scale(1); opacity: 0.82; }
      100% { transform: translate3d(3%, 2%, 0) scale(1.08); opacity: 1; }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes spore-drift {
      0% {
        opacity: 0;
        transform: translate3d(0, 0, 0) scale(0.4);
      }
      14% {
        opacity: 0.95;
      }
      100% {
        opacity: 0;
        transform: translate3d(var(--dx), var(--dy), 0) scale(0.16);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .scene,
      .bg-layer,
      .mycelium,
      .spore,
      .gyro-orb {
        transition: none !important;
        animation: none !important;
      }
    }
  </style>
</head>
<body>
  {% include '_account_nav.html' %}
  <main id="scene" class="scene" aria-label="Psychedelic fungi environment">
    <div class="bg-layer layer-a"></div>
    <div class="bg-layer layer-b"></div>
    <div class="mycelium mycelium-a"></div>
    <div class="mycelium mycelium-b"></div>
    <section id="fungi-field" class="fungi-field"></section>
    <section id="spore-field" class="spore-field"></section>

    <div id="gyro-gate" class="gyro-gate" role="button" aria-label="Enable motion controls">
      <div class="gyro-orb" aria-hidden="true"></div>
      <span>Tap To Enable Motion</span>
    </div>
  </main>

  <script>
    (function () {
      const scene = document.getElementById("scene");
      const fungiField = document.getElementById("fungi-field");
      const sporeField = document.getElementById("spore-field");
      const gyroGate = document.getElementById("gyro-gate");
      const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const rootStyle = document.documentElement.style;
      const ua = navigator.userAgent || "";
      const isMobile = /iPhone|iPad|iPod|Android/i.test(ua);
      const hardwareThreads = Number(navigator.hardwareConcurrency || 4);
      const memoryGb = Number(navigator.deviceMemory || 4);
      const lowPower = isMobile || hardwareThreads <= 4 || memoryGb <= 4;
      const quality = reduceMotion ? "minimal" : (lowPower ? "low" : "high");
      document.body.setAttribute("data-quality", quality);

      const fungi = [];
      let targetX = 0;
      let targetY = 0;
      let motionX = 0;
      let motionY = 0;
      let motionReady = false;
      let orientationBound = false;
      let lastFrameTime = 0;
      let frameTick = 0;
      let activeSpores = 0;
      let paused = false;

      const frameBudgetMs = quality === "high" ? (1000 / 60) : (quality === "low" ? (1000 / 30) : (1000 / 18));
      const maxSpores = quality === "high" ? 180 : (quality === "low" ? 24 : 0);
      const ambientSporeChanceBase = quality === "high" ? 0.026 : (quality === "low" ? 0.007 : 0);
      const ambientSporeChanceEnergy = quality === "high" ? 0.042 : (quality === "low" ? 0.014 : 0);
      const fungiStep = quality === "high" ? 1 : 2;

      const typePool = ["amanita", "jelly", "coral", "chanterelle", "ink", "glow", "cluster"];

      function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
      }

      function rand(min, max) {
        return min + Math.random() * (max - min);
      }

      function buildFungiForest() {
        const total = quality === "high" ? 24 : (quality === "low" ? 8 : 6);
        const sortedX = [];
        for (let i = 0; i < total; i += 1) {
          sortedX.push(rand(3, 97));
        }
        sortedX.sort((a, b) => a - b);

        for (let i = 0; i < total; i += 1) {
          const node = document.createElement("article");
          const type = typePool[Math.floor(Math.random() * typePool.length)];
          node.className = `fungus ${type}`;
          node.innerHTML = "<span class='aura'></span><span class='stem'></span><span class='cap'></span><span class='gills'></span><span class='spots'></span>";

          const scale = rand(0.42, 1.5);
          const x = sortedX[i];
          const y = rand(1, 24);
          const tone = rand(4, 340).toFixed(2);
          const depth = rand(0.4, 1.35);
          const lean = rand(-8, 8);
          const phase = rand(0, Math.PI * 2);
          const bobAmp = rand(1.2, 7);
          const swayAmp = rand(0.3, 3.8);
          const bobSpeed = rand(0.72, 1.6);

          node.style.setProperty("--x", `${x}%`);
          node.style.setProperty("--y", `${y}%`);
          node.style.setProperty("--scale", scale.toFixed(3));
          node.style.setProperty("--tone", tone);
          node.style.zIndex = String(20 + Math.floor(scale * 20));

          fungiField.appendChild(node);
          fungi.push({ node, depth, lean, phase, bobAmp, swayAmp, bobSpeed });
        }
      }

      function spawnSpore(x, y, strength) {
        if (activeSpores >= maxSpores) {
          return;
        }
        const rect = scene.getBoundingClientRect();
        const node = document.createElement("span");
        node.className = "spore";

        const sx = clamp(x - rect.left + rand(-16, 16), 0, rect.width);
        const sy = clamp(y - rect.top + rand(-10, 10), 0, rect.height);
        const size = rand(3, (quality === "high" ? 10 : 7.4) + strength * 2.2);
        const dx = rand(-90, 90) * (quality === "high" ? 1 : 0.72) * (0.8 + strength * 0.25);
        const dy = rand(-170, -42) * (quality === "high" ? 1 : 0.72) * (0.8 + strength * 0.28);
        const life = rand(quality === "high" ? 1200 : 950, quality === "high" ? 2800 : 1700);
        const tone = (20 + (Math.random() * 320)).toFixed(2);

        node.style.setProperty("--x", `${sx}px`);
        node.style.setProperty("--y", `${sy}px`);
        node.style.setProperty("--size", `${size.toFixed(2)}px`);
        node.style.setProperty("--dx", `${dx.toFixed(2)}px`);
        node.style.setProperty("--dy", `${dy.toFixed(2)}px`);
        node.style.setProperty("--life", `${life.toFixed(0)}ms`);
        node.style.setProperty("--tone", tone);

        sporeField.appendChild(node);
        activeSpores += 1;
        window.setTimeout(() => {
          node.remove();
          activeSpores = Math.max(0, activeSpores - 1);
        }, life + 260);
      }

      function spawnBurst(x, y, base) {
        const amount = quality === "high"
          ? clamp(Math.floor(6 + base * 14), 6, 26)
          : clamp(Math.floor(3 + base * 7), 3, 10);
        for (let i = 0; i < amount; i += 1) {
          spawnSpore(x, y, base);
        }
      }

      function onPointerMove(event) {
        const rect = scene.getBoundingClientRect();
        const nx = ((event.clientX - rect.left) / rect.width) * 2 - 1;
        const ny = ((event.clientY - rect.top) / rect.height) * 2 - 1;
        targetX = clamp(nx, -1, 1);
        targetY = clamp(ny, -1, 1);
      }

      function onDeviceOrientation(event) {
        if (!motionReady) {
          return;
        }
        if (typeof event.gamma !== "number" || typeof event.beta !== "number") {
          return;
        }
        const nx = clamp(event.gamma / 30, -1, 1);
        const ny = clamp(event.beta / 40, -1, 1);
        targetX = nx;
        targetY = ny;
      }

      function mountOrientationListener() {
        if (orientationBound) {
          return;
        }
        window.addEventListener("deviceorientation", onDeviceOrientation, true);
        orientationBound = true;
      }

      function hideGyroGate() {
        gyroGate.classList.add("hidden");
      }

      async function requestGyroPermission() {
        if (!("DeviceOrientationEvent" in window)) {
          hideGyroGate();
          motionReady = true;
          return;
        }

        try {
          if (typeof DeviceOrientationEvent.requestPermission === "function") {
            const permission = await DeviceOrientationEvent.requestPermission();
            if (permission !== "granted") {
              hideGyroGate();
              motionReady = true;
              return;
            }
          }
          mountOrientationListener();
          hideGyroGate();
          motionReady = true;
        } catch (_error) {
          hideGyroGate();
          motionReady = true;
        }
      }

      function startGyroPrompt() {
        if (reduceMotion) {
          hideGyroGate();
          motionReady = true;
          return;
        }

        if (!("DeviceOrientationEvent" in window)) {
          hideGyroGate();
          motionReady = true;
          return;
        }

        if (typeof DeviceOrientationEvent.requestPermission === "function") {
          gyroGate.addEventListener("pointerdown", requestGyroPermission, { once: true, passive: true });
          return;
        }

        mountOrientationListener();
        hideGyroGate();
        motionReady = true;
      }

      function animate(now) {
        if (paused) {
          window.requestAnimationFrame(animate);
          return;
        }
        if (now - lastFrameTime < frameBudgetMs) {
          window.requestAnimationFrame(animate);
          return;
        }
        lastFrameTime = now;
        motionX += (targetX - motionX) * 0.09;
        motionY += (targetY - motionY) * 0.09;
        const energy = clamp(Math.abs(motionX) + Math.abs(motionY), 0, 1.6);

        const hueBase = quality === "high" ? 58 : 24;
        const hueTail = quality === "high" ? 28 : 12;
        const hue = (Math.sin(now * 0.00011 + motionX * 1.9) * hueBase) + (Math.cos(now * 0.000085 - motionY * 1.5) * hueTail);
        const glow = 0.72 + (Math.sin(now * 0.0012) * 0.12) + energy * 0.32;
        rootStyle.setProperty("--tilt-x", motionX.toFixed(4));
        rootStyle.setProperty("--tilt-y", motionY.toFixed(4));
        rootStyle.setProperty("--energy", energy.toFixed(4));
        rootStyle.setProperty("--hue-shift", `${hue.toFixed(2)}deg`);
        rootStyle.setProperty("--glow", glow.toFixed(4));

        const startIndex = frameTick % fungiStep;
        for (let i = startIndex; i < fungi.length; i += fungiStep) {
          const f = fungi[i];
          const drift = Math.sin(now * 0.001 * f.bobSpeed + f.phase) * f.bobAmp;
          const sway = Math.sin(now * 0.0008 * (f.bobSpeed + 0.35) + f.phase * 0.7) * f.swayAmp;
          const gxFactor = quality === "high" ? 28 : 16;
          const gyFactor = quality === "high" ? -16 : -8;
          const rotFactor = quality === "high" ? 11 : 5;
          const gx = motionX * f.depth * gxFactor;
          const gy = motionY * f.depth * gyFactor;
          const rot = f.lean + sway + (motionX * f.depth * rotFactor);
          f.node.style.transform =
            `translate3d(calc(-50% + ${gx.toFixed(2)}px), ${(drift + gy).toFixed(2)}px, 0) rotate(${rot.toFixed(2)}deg)`;
        }
        frameTick += 1;

        if (!reduceMotion && maxSpores > 0 && Math.random() < (ambientSporeChanceBase + energy * ambientSporeChanceEnergy)) {
          const rect = scene.getBoundingClientRect();
          spawnSpore(
            rect.left + rand(rect.width * 0.05, rect.width * 0.95),
            rect.top + rand(rect.height * 0.38, rect.height * 0.95),
            0.25 + energy
          );
        }

        window.requestAnimationFrame(animate);
      }

      buildFungiForest();
      startGyroPrompt();

      scene.addEventListener("pointermove", onPointerMove, { passive: true });
      scene.addEventListener("pointerdown", (event) => {
        spawnBurst(event.clientX, event.clientY, 0.45 + clamp(Math.abs(motionX) + Math.abs(motionY), 0, 1));
      }, { passive: true });

      document.addEventListener("visibilitychange", () => {
        paused = document.hidden;
      });

      if (!reduceMotion && quality !== "minimal") {
        window.requestAnimationFrame(animate);
      }
    })();
  </script>
</body>
</html>
